"use client";"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const a=require("react"),I=require("react/jsx-runtime"),A=require("react-dom"),fe=["aol.com","att.net","comcast.net","facebook.com","gmail.com","gmx.com","googlemail.com","google.com","hotmail.com","hotmail.co.uk","mac.com","me.com","mail.com","msn.com","live.com","sbcglobal.net","verizon.net","yahoo.com","yahoo.co.uk","email.com","fastmail.fm","games.com","gmx.net","hush.com","hushmail.com","icloud.com","iname.com","inbox.com","lavabit.com","love.com","outlook.com","pobox.com","protonmail.ch","protonmail.com","tutanota.de","tutanota.com","tutamail.com","tuta.io","keemail.me","rocketmail.com","safe-mail.net","wow.com","ygm.com","ymail.com","zoho.com","bellsouth.net","charter.net","cox.net","earthlink.net","juno.com","btinternet.com","virginmedia.com","blueyonder.co.uk","live.co.uk","ntlworld.com","orange.net","sky.com","talktalk.co.uk","tiscali.co.uk","virgin.net","bt.com","sina.com","sina.cn","qq.com","naver.com","hanmail.net","daum.net","nate.com","yahoo.co.jp","yahoo.co.kr","yahoo.co.id","yahoo.co.in","yahoo.com.sg","yahoo.com.ph","163.com","yeah.net","126.com","21cn.com","aliyun.com","foxmail.com","hotmail.fr","live.fr","laposte.net","yahoo.fr","wanadoo.fr","orange.fr","gmx.fr","sfr.fr","neuf.fr","free.fr","gmx.de","hotmail.de","live.de","online.de","t-online.de","web.de","yahoo.de","libero.it","virgilio.it","hotmail.it","aol.it","tiscali.it","alice.it","live.it","yahoo.it","email.it","tin.it","poste.it","teletu.it","bk.ru","inbox.ru","list.ru","mail.ru","rambler.ru","yandex.by","yandex.com","yandex.kz","yandex.ru","yandex.ua","ya.ru","hotmail.be","live.be","skynet.be","voo.be","tvcablenet.be","telenet.be","hotmail.com.ar","live.com.ar","yahoo.com.ar","fibertel.com.ar","speedy.com.ar","arnet.com.ar","yahoo.com.mx","live.com.mx","hotmail.es","hotmail.com.mx","prodigy.net.mx","yahoo.ca","hotmail.ca","bell.net","shaw.ca","sympatico.ca","rogers.com","yahoo.com.br","hotmail.com.br","outlook.com.br","uol.com.br","bol.com.br","terra.com.br","ig.com.br","r7.com","zipmail.com.br","globo.com","globomail.com","oi.com.br"];function he(o,d){const s=d||(navigator==null?void 0:navigator.language),[u,g]=a.useState(o.default);return a.useEffect(()=>{const f=o[s];if(f)return g(f);const k=s.split(/[-_]/)[0],i=o[k];if(i)return g(i)},[s,o]),u}const ge=/^[a-z0-9@.]$/i;function K(o){return o.replace(/\s+/g,"").toLowerCase()}function J(o,d,s){return typeof o=="number"&&Number.isInteger(o)&&o<=d?o:s}function R(o){return typeof o=="function"}function pe(o,d){const[s]=o.split("@"),u=o.indexOf("@"),g=u>=0?o.slice(u+1):"",f=s.length>=d,k=f&&o.includes("@"),i=f&&g.length>=1;return{username:s,domain:g,hasUsername:f,hasAt:k,hasDomain:i}}var p=(o=>(o.Wrapper="wrapper",o.Input="input",o.Dropdown="dropdown",o.Suggestion="suggestion",o.Username="username",o.Domain="domain",o))(p||{});const Q=a.forwardRef(({onChange:o,value:d,baseList:s,refineList:u=[],maxResults:g=6,minChars:f=2,className:k,classNames:i,onSelect:X=()=>{},children:Y,activeDataAttr:T,onFocus:z,onBlur:U,onInput:q,onKeyDown:Z=()=>{},dropdownAriaLabel:N="Suggestions",...ee},F)=>{const oe=(u==null?void 0:u.length)>0,M=J(g,8,6),W=J(f,8,2),P=s.slice(0,M),_=a.useRef(!1),$=a.useId(),B=a.useRef(null),r=a.useRef(null),te=a.useRef(null),b=a.useRef([]),[ne,H]=a.useState("email"),[x,S]=a.useState(P),[c,V]=a.useState({focusedIndex:-1,hoveredIndex:-1});function y(e,t){V({focusedIndex:e,hoveredIndex:t})}function C({isDecrement:e}){const t=e?-1:1;V(n=>({hoveredIndex:n.hoveredIndex+t,focusedIndex:n.hoveredIndex+t}))}const E=typeof d!="string"?"":K(d),[O]=E.split("@"),v=_.current&&x.length>0&&O.length>=W,l=a.useCallback(()=>{S([]),y(-1,-1)},[]);a.useEffect(()=>{var e;c.focusedIndex>=0&&((e=b==null?void 0:b.current[c.focusedIndex])==null||e.focus())},[c.focusedIndex]),a.useEffect(()=>{function e(t){var n;v&&!((n=B.current)!=null&&n.contains(t.target))&&l()}return v||y(-1,-1),document.addEventListener("mousedown",e),window.addEventListener("blur",l),()=>{document.removeEventListener("mousedown",e),window.removeEventListener("blur",l)}},[v,l]);function ae(){r.current&&(A.flushSync(()=>{H("text")}),r.current.setSelectionRange(E.length,E.length),A.flushSync(()=>{H("email")}),r.current.focus())}function re(e){_.current=!0;const t=K(e.target.value),{hasUsername:n,hasAt:h,hasDomain:L,domain:m}=pe(t,W);if(n)if(!oe)h?l():S(P);else if(L){const w=u.filter(de=>de.startsWith(m)).slice(0,M);w.length>0?w[0]===m?l():S(w):l()}else S(P);o(t)}function ce(e,t,n){X({value:e,keyboard:t,position:n})}function j(e,t,{isKeyboard:n,isInput:h}={isKeyboard:!1,isInput:!1}){var L;e.preventDefault(),e.stopPropagation(),A.flushSync(()=>{var w;let m="";h?m=(w=b.current[t])==null?void 0:w.textContent:m=e.currentTarget.textContent,m=K(m),o(m),ce(m,n,t+1),l()}),(L=r.current)==null||L.focus()}function ie(e){switch(e.code){case"Tab":case"Escape":return e.stopPropagation(),l();case"ArrowUp":e.preventDefault(),e.stopPropagation(),c.hoveredIndex>=0&&C({isDecrement:!0});break;case"ArrowDown":e.preventDefault(),e.stopPropagation(),c.hoveredIndex>=0&&C({isDecrement:!1}),c.hoveredIndex<0&&y(0,0);break;case"Enter":e.preventDefault(),e.stopPropagation(),c.hoveredIndex>=0&&j(e,c.hoveredIndex,{isKeyboard:!0,isInput:!0});break}}function se(e){var t,n,h;if(ge.test(e.key))return e.stopPropagation(),(t=r==null?void 0:r.current)==null?void 0:t.focus();switch(e.code){case"Escape":return e.preventDefault(),e.stopPropagation(),l(),ae();case"Enter":case"Tab":case"Space":return e.preventDefault(),e.stopPropagation(),j(e,c.focusedIndex,{isKeyboard:!0,isInput:!1});case"Backspace":case"ArrowLeft":case"ArrowRight":return e.stopPropagation(),(n=r==null?void 0:r.current)==null?void 0:n.focus();case"ArrowUp":e.preventDefault(),e.stopPropagation(),C({isDecrement:!0}),c.hoveredIndex===0&&((h=r==null?void 0:r.current)==null||h.focus());break;case"ArrowDown":e.preventDefault(),e.stopPropagation(),c.hoveredIndex<x.length-1&&C({isDecrement:!1}),c.hoveredIndex===x.length-1&&y(0,0);break}}function G(e,t){(!b.current.some(h=>h===e.relatedTarget)||e.relatedTarget==null)&&t(e)}function le(){return{onKeyDown(e){ie(e),Z(e)},...R(q)?{onInput:q}:{},...R(U)?{onBlur:e=>G(e,U)}:{},...R(z)?{onFocus:e=>G(e,z)}:{}}}function ue(e){r.current=e,F&&(F.current=e)}function me(){return{className:`${k||""} ${(i==null?void 0:i.wrapper)||""}`.trim()||void 0}}function D(e){return i!=null&&i[e]?{className:i[e]}:{}}return I.jsxs("div",{ref:B,...me(),children:[I.jsx("input",{...ee,ref:e=>ue(e),onChange:e=>re(e),"aria-expanded":v,value:E,type:ne,role:x.length>0?"combobox":"",autoComplete:"off","aria-autocomplete":"list",...v?{"aria-controls":$}:{},...D(p.Input),...le()}),v&&I.jsx("ul",{role:"listbox","aria-label":N,ref:te,id:$,...D(p.Dropdown),children:x.map((e,t)=>I.jsxs("li",{role:"option",ref:n=>b.current[t]=n,onPointerMove:()=>y(-1,t),onPointerLeave:()=>y(-1,-1),onClick:n=>j(n,t,{isKeyboard:!1,isInput:!1}),onKeyDown:se,"aria-posinset":t+1,"aria-setsize":x.length,tabIndex:-1,"aria-selected":"false",...D(p.Suggestion),[T||"data-active-email"]:t===c.hoveredIndex,children:[I.jsx("span",{...D(p.Username),children:O}),I.jsxs("span",{...D(p.Domain),children:["@",e]})]},e))}),Y]})});Q.displayName="Email";exports.Elements=p;exports.Email=Q;exports.domains=fe;exports.useLocalizedList=he;
